# Simple pooling benchmark
# Tests object reuse with pools

(var iterations 1000)

# Test 1: Array allocation
(println "Testing array pooling...")
(var arr_sum 0)
(var i 0)
(while (< i iterations)
  (var arr [1 2 3 4 5])
  (arr_sum = (+ arr_sum 1))
  (i = (+ i 1)))
(println "Array operations completed: " arr_sum)

# Test 2: Map allocation
(println "Testing map pooling...")
(var map_sum 0)
(i = 0)
(while (< i iterations)
  (var m {^x 1 ^y 2 ^z 3})
  (map_sum = (+ map_sum 1))
  (i = (+ i 1)))
(println "Map operations completed: " map_sum)

# Test 3: Gene allocation
(println "Testing gene pooling...")
(var gene_sum 0)
(i = 0)
(while (< i iterations)
  # Simple gene expression creation
  (var g (:test a 1 b 2))
  (gene_sum = (+ gene_sum 1))
  (i = (+ i 1)))
(println "Gene operations completed: " gene_sum)

(println "Pool efficiency test complete")